- part_of_registration = false unless defined?(part_of_registration)
- validation = 'inline-validation'
= form_for current_user, html: { role: "form", class: 'form-horizontal', data: { object: "#{validation}"} }, url: update_account_path, method: :patch do |f|
  .content-container
    .content-header
      - if part_of_registration
        %h1.f300.centered{ style: 'margin-bottom: 20px;' } My Provider Profile
        %p.lead
          By offering this network to your patients, and engaging with them actively outside of the office, they begin to feel a uniquely incredible quality of care. This community gives people with sleep apnea a high level of support from researchers, care providers, and fellow patients across the world.
      - else
        %h3.f300.centered My Provider Profile
    .content-body
      .form-group
        .col-sm-3.col-sm-offset-3
          #profile-image-container
            = render 'account/profile_photo'
        .col-sm-3
          .social-image-updater
            %h4.f300
              Change Photo
            %br
            .centered-text
              =f.file_field :photo
            %br
            #filedrag{ data: { object: 'dropfile' } }
              or drop photo here
      %br

      .form-group
        %label.control-label.col-sm-3
          Forum Name
        .col-sm-6
          .input-group
            = f.text_field :forum_name, class: 'form-control'
            %span.input-group-btn
              = link_to suggest_random_forum_name_path, method: :post, remote: true, data: { toggle: 'tooltip', container: 'body' }, title: 'Generate Random Nickname', class: 'btn btn-default' do
                %span.glyphicon.glyphicon-random
          - if errors = current_user.errors[:forum_name] and errors.present?
            .bs-callout.bs-callout-danger
              - if 'is invalid'.in?(errors)
                Please enter a valid forum name that consists of letters
                %code a-z
                and
                numbers
                %code 0-9
                only.
              - if 'has already been taken'.in?(errors)
                This forum name has already been taken. Please choose another forum name.
              You may click the
              %span.glyphicon.glyphicon-random
              for a suggestion.

      .form-group
        %label.control-label.col-sm-3
          Official Provider Name
        .col-sm-6
          =f.text_field :provider_name, class: 'form-control', placeholder: 'Your official name (eg. John Smith Medical)', data: { object: 'inline-validation-item', name: 'provider-name' }
        .col-sm-3.hidden{ data: { object: 'provider-name--error' } }
          %p.small.centered-text.inline-validation-error
            Please enter your official provider name!

      .form-group
        %label.control-label.col-sm-3
          Custom URL Name
        .col-sm-6
          =f.text_field :slug, class: 'form-control', placeholder: 'Your unique URL (eg. john-smith-medical)', data: { object: 'inline-validation-item', name: 'provider-slug' }
        .col-sm-3.hidden{ data: { object: 'provider-slug--error' } }
          %p.small.centered-text.inline-validation-error
            Please enter a unique URL so users can easily find you! Only use numbers and lower-case letters, separated by hyphens (e.g. provider-example-1).

      .form-group
        %label.control-label.col-sm-3
          Welcome Message
        .col-sm-6
          =f.text_area :welcome_message, class: 'form-control', placeholder: 'Welcome to my page!', value: current_user.welcome_message, rows: '3', data: { object: 'inline-validation-item', name: 'provider-welcome-message' }
        .col-sm-3.hidden{ data: { object: 'provider-welcome-message--error' } }
          %p.small.centered-text.inline-validation-error
            Please enter a unique message for your incoming members!

      .row
        =f.submit "Save and Preview Changes", class: 'btn btn-primary-custom col-sm-6 col-sm-offset-3'

    .content-footer
      - if current_user.provider_name.present? and current_user.slug.present?
        %h4.f400
          %strong Your personal url:
          %span.lighter-blue.wrapword= link_to ENV['website_url'] + '/p/' + current_user.slug, ENV['website_url'] + '/p/'+ current_user.slug
      - else
        Please enter your
        - if current_user.provider_name.blank? and current_user.slug.blank?
          <code>Official Provider Name</code> and <code>Custom URL Name</code>
        - elsif current_user.provider_name.blank?
          <code>Official Provider Name</code>
        - else
          <code>Custom URL Name</code>
        above to generate the link you can share with your members.
