- answer = @answer_session.answers.where(question_id: question.id).first_or_initialize

- progress = false
- onsubmit = ""
- extra_class = ""
- heading = ""

- if question.answer_templates.where(template_name: 'checkbox', parent_answer_option_value: nil).count > 0
  - onsubmit = "return false;"
  - heading = "(Check all that apply)"

- if question.answer_templates.where(template_name: 'radio', parent_answer_option_value: nil).count > 0
  - progress = true

- if question.answer_templates.where(template_name: 'radio', parent_answer_template_id: nil).count > 1
  - extra_class = "multiple-question-parts"


= form_tag process_answer_surveys_path(question_id: question, answer_session_id: answer_session), role: "form", onsubmit: onsubmit, class: "survey-container #{extra_class}", data: { object: "question-container-#{question_number}", progress: progress } do
  .panel
    .question-container
      %h3.f300= question.text
      - unless heading.blank?
        %h5.f300.reset-layout= heading

    .input-container
      - question.answer_templates.where(parent_answer_option_value: [nil, '']).each do |answer_template|
        - unless answer_template.template_name.blank?
          = render "surveys/questions/answer_templates/#{answer_template.template_name}", question: question, answer_session: @answer_session, answer_template: answer_template, answer: answer
      .row
        .col-sm-8.col-sm-offset-2.col-xs-12
          = render 'surveys/question_templates/prefer_not_to_answer_box', question: question, answer: answer
