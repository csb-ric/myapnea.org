- content_for :community_contributions do
  .panel.panel-primary
    .panel-heading
      Community Contributions
    .panel-body.text-right
      .row
        .col-md-4
          Members Joined
          %br/
          %span.h0 560
        .col-md-4
          Profiles Created
          %br/
          %span.h0 1.3k
        .col-md-4
          Locations shared
          %br/
          %span.h0 350
- content_for :your_contributions do
  = render partial: "shared/badge_list", :locals => {badges: [{title:"Map Maker",body:"You shared your location", earned:true, icon: "fa-question-circle"},
                                                              {title:"Socializer",body:"You created a social profile", icon: "fa-check-circle-o"} ]}


.panel.panel-default
  .panel-heading
    .row
      .col-md-6
        %h3.panel-title Map

      .col-md-6


        .btn-group.btn-group-sm.pull-right{data: {toggle: "buttons"}}
          %label.btn.btn-default#city-view
            %input{type: "radio", name: "zoomLevel"}
            City
          %label.btn.btn-default#state-view
            %input{type: "radio", name: "zoomLevel"}
            State
          %label.btn.btn-default#country-view.active
            %input{type: "radio", name: "zoomLevel", checked: 'checked'}
            Country
          %label.btn.btn-default#world-view
            %input{type: "radio", name: "zoomLevel"}
            World

  #user_map{data: {path: locations_path}}

  .panel-footer.small
    - if current_user and current_user.social_profile and current_user.social_profile.location
      .pull-right
        You are currently living in
        = current_user.social_profile.location
        = link_to "Update this.", social_profile_path
      .clearfix
    - else
      Where do you live?
      = link_to "Add yourself to this map.", social_profile_path
.graphs

  .row
    .col-md-4
      .panel.panel-default
        .panel-heading
          %h3.panel-title Age
        .panel-body
          = image_tag "histogram.png", class: "img-responsive"
          .req age_distribution (hash of age -> count)


    .col-md-4
      .panel.panel-default
        .panel-heading
          %h3.panel-title Gender
        .panel-body
          = image_tag "donut.png", class: "img-responsive"
          .req sex_distribution (sex -> count)


    .col-md-4
      .panel.panel-default
        .panel-heading
          %h3.panel-title Location
        .panel-body
          = image_tag "bar.png", class: "img-responsive"
          .req locations (location(lat/lon, city, state, country) -> count)

  .row
    .col-md-4
      .panel.panel-default
        .panel-heading
          %h3.panel-title Surveys Completed
        .panel-body
          = image_tag "pie.png", class: "img-responsive"
          .req surveys_completed [date,survey_id]


    .col-md-4
      .panel.panel-default
        .panel-heading
          %h3.panel-title Research Topic Input
        .panel-body
          = image_tag "histogram.png", class: "img-responsive"

    .col-md-4
      .panel.panel-default
        .panel-heading
          %h3.panel-title Connected Data Sources
        .panel-body
          = image_tag "pie.png", class: "img-responsive"
          .req data_sources_connected [date,data_source_id]

= javascript_include_tag "//maps.googleapis.com/maps/api/js?key=AIzaSyBB91qMUvtmPzct9z7slTqm-lTUEVuYjKo"
= javascript_include_tag 'social/maps'
