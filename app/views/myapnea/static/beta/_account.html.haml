.content-main-header
  %h1 Account Settings
- if current_user.is_provider?
  = render partial: 'static/beta/providers_profile'
-else
  = render partial: 'static/beta/social_profile'
.panel
  .panel-heading
    %h4.f300 Basic Information
  .panel-body
    = form_for current_user, url: update_account_path, html: { class: 'form-horizontal' } do |f|
      .form-group
        = f.label :first_name, class: 'col-sm-2 control-label input-lg'
        .col-sm-10
          = f.text_field :first_name, class: 'form-control input-lg', placeholder: User.human_attribute_name(:first_name), autocomplete: :off
      .form-group
        = f.label :last_name, class: 'col-sm-2 control-label input-lg'
        .col-sm-10
          = f.text_field :last_name, class: 'form-control input-lg', placeholder: User.human_attribute_name(:last_name), autocomplete: :off
      .form-group
        = f.label :email, class: 'col-sm-2 control-label input-lg'
        .col-sm-10
          = f.email_field :email, class: 'form-control input-lg', placeholder: User.human_attribute_name(:email), autocomplete: :off
      .form-group
        = f.label :zip_code, class: 'col-sm-2 control-label input-lg'
        .col-sm-10
          = f.text_field :zip_code, class: 'form-control input-lg', placeholder: User.human_attribute_name(:zip_code), autocomplete: :off
      .form-group
        = f.label :year_of_birth, class: 'col-sm-2 control-label input-lg'
        .col-sm-10
          = f.text_field :year_of_birth, class: 'form-control input-lg', placeholder: User.human_attribute_name(:year_of_birth), autocomplete: :off
      = f.submit "Save Changes", class: 'btn btn-primary pull-right'
.panel
  .panel-heading
    %h4.f300 Change Password
  .panel-body
    = form_for current_user, url: change_password_path do |f|
      .form-group
        = f.label :current_password, class: "sr-only"
        = f.password_field :current_password, class: 'form-control input-lg', placeholder: 'Current Password'
      .form-group
        = f.label :password, class: 'sr-only'
        = f.password_field :password, class: 'form-control input-lg', placeholder: "New Password"
      = f.submit "Change My Password", class: 'btn btn-primary pull-right'
.panel
  .panel-heading
    %h4.f300 Member Stats
  %table.table
    %tr
      %td Member Since
      %td= current_user.created_at.strftime("%b %e, %Y")
    %tr
      %td Member Number
      %td= "##{current_user.id}"
.panel
  .panel-heading
    %h4.f300 Notification Preferences
  .panel-body
    %form.form-horizontal{role: "form"}
      .radio
        %label
          %input#optionsRadios1{checked: "checked", name: "optionsRadios", type: "radio", value: "option1"}/
          Email Me
      .radio
        %label
          %input#optionsRadios2{name: "optionsRadios", type: "radio", value: "option2"}/
          Don't Email Me
.panel
  .panel-heading
    %h4.f300 Leave Research Study
  .panel-body
    %p="You may choose to leave the research study at any time. We will no longer collect any information from you and we will stop all communication. However, as stated in the informed consent, the information that you have already provided to #{ENV['pprn_title']} will remain within the study results."
    = link_to 'View Consent', stealth_consent_path, class: 'btn btn-primary', style: 'width: 49%; margin:.5%; float:left;'
    = link_to 'View Privacy Policy', stealth_privacy_path, class: 'btn btn-primary', style: 'width: 49%; margin:.5%; float:left;'
    = link_to 'Leave Research Study', consent_path(consent_revoked: true), method: :post, class: 'btn btn-warning', style: 'width: 99%; margin: .5%; float:left;'

.panel
  .panel-heading
    %h4.f300 Beta Settings
  .panel-body
    - user_class_sym = current_user.class.name.downcase.to_sym
    - if current_user.beta_opt_in?
      You currently have the <strong>Beta Settings Enabled</strong>. You may opt out of the beta. If you ran into issues that forced you to cancel, consider
      = link_to 'contacting us', "mailto:#{ENV['pprn_support_email']}"
      so that we can address any issues before launching the new site changes to a larger audience!
      %div{ style: 'text-align:center;margin-top:10px' }
        = link_to 'Disable Beta', update_account_path(user_class_sym => { beta_opt_in: '0' }), method: :patch, class: 'btn btn-primary'
    - else
      Preview upcoming changes to MyApnea.Org and help us iron out the kinks in our new upcoming layout of the site!
      %div{ style: 'text-align:center;margin-top:10px' }
        = link_to 'Enable Beta', update_account_path(user_class_sym =>   { beta_opt_in: '1' }), method: :patch, class: 'btn btn-primary'
