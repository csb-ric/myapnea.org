#topic{class: @topic.locked? ? 'locked' : 'unlocked'}
  = render :partial => 'forem/topics/head', :locals => { :topic => @topic }
  #menu
    .btn-group
      - if @topic.user == forem_user || forem_admin?
        = link_to t(".delete"), forem.forum_topic_path(@forum, @topic), :method => :delete, data: { :confirm => t("are_you_sure") }, :class => "btn btn-danger"
      - if forem_user
        - if !@topic.subscriber?(forem_user.id)
          = link_to t(".subscribe"), forem.subscribe_forum_topic_path(@forum, @topic), :method => :post, :class => "btn btn-success"
        - else
          = link_to t(".unsubscribe"), forem.unsubscribe_forum_topic_path(@forum, @topic), :method => :post, :class => "btn btn-danger"
    - if forem_admin?
      .btn-group
        = link_to t('forem.topic.links.edit'), forem.edit_admin_forum_topic_path(@forum, @topic), :class => "btn btn-default"
        = link_to t(".hide.#{@topic.hidden}"), forem.toggle_hide_admin_forum_topic_path(@forum, @topic), :method => :put, :class => "btn btn-default"
        = link_to t(".lock.#{@topic.locked}"), forem.toggle_lock_admin_forum_topic_path(@forum, @topic), :method => :put, :class => "btn btn-default"
        = link_to t(".pin.#{@topic.pinned}"), forem.toggle_pin_admin_forum_topic_path(@forum, @topic), :method => :put, :class => "btn btn-default"
  - if @topic.pending_review?
    #topic_moderation.moderation.alert
      = t(".pending_review")
      - if forem_admin_or_moderator?(@topic.forum)
        = form_for @topic, :url => forem.moderate_forum_topic_path(@topic.forum, @topic), :method => :put do |f|
          = render "/forem/moderation/options", :f => f
  = forem_pages_widget(@posts)
  %br/
  #posts
    = render :partial => "forem/posts/post", :collection => @posts

  %hr/

  - if current_user
    = form_for [forem, @topic.forum, @topic, @post] do |f|
      = render :partial => "forem/posts/form", :locals => { :f => f }

      = hidden_field_tag :source, "topic"
      = f.button :class => "btn btn-primary btn-block btn-sm" do
        %i.fa.fa-plus
        \&nbsp; Submit your comment
  - else
    = link_to 'Sign in', main_app.new_user_session_path, class: "btn btn-primary btn-sm"
    to leave a comment

  = forem_pages_widget(@posts)
