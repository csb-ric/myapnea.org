- @title = 'Order Team Members'

.content-main-header2
  %h1
    = link_to 'Admin Dashboard', admin_path
    &middot;
    = link_to 'Team Members', admin_team_members_path
    &middot;
    Order

.list-group
  - @admin_team_members.count.times do |tmi|
    - if @admin_team_members.where(position: tmi).present?
      - @admin_team_members.where(position: tmi).each_with_index do |tm, tmpi|
        .list-group-item{ class: "#{'list-group-item-warning' if tmpi > 0}"}
          .pull-left
            = image_tag team_member_photo_url(tm), height: 30, width: 30
            = tm.name
          .pull-right
            = tmi
            = link_to '^', admin_team_member_path(tm, admin_team_member: { position: tm.position-1 }, redirect_back: 'true'), method: :patch
            = link_to 'v', admin_team_member_path(tm, admin_team_member: { position: tm.position+1 }, redirect_back: 'true'), method: :patch
          .clearfix
    - else
      .list-group-item.list-group-item-danger
        .pull-right
          = tmi
        .clearfix
  - @admin_team_members.where("position > ?", @admin_team_members.count - 1).each do |tm|
    .list-group-item.list-group-item-danger
      .pull-left
        = tm.name
      .pull-right
        = tm.position
        = link_to '^', admin_team_member_path(tm, admin_team_member: { position: tm.position-1 }, redirect_back: 'true'), method: :patch
        = link_to 'v', admin_team_member_path(tm, admin_team_member: { position: tm.position+1 }, redirect_back: 'true'), method: :patch
      .clearfix
